(()=>{var e=new XMLHttpRequest;e.open("GET","data/users.json",!0),e.onreadystatechange=(()=>{if(4===e.readyState&&200===e.status){const s=document.querySelector("#userList"),r=JSON.parse(e.responseText);var t="<tbody>",a=0;for(let e in r)t+=`<tr><td><input type="checkbox" name="${++a}" value="${a}"></td>\n                        <td><span data-last-name="${r[e].last_name}" class="last-name">${r[e].last_name}</span>,\n                          <span data-first-name="${r[e].first_name}" class="first-name">${r[e].first_name}</span> \n                          <small><span data-email="${r[e].email_address}" class="email">${r[e].email_address}</span></small></td>\n                        <td><span data-title="${r[e].title}" class="title">${r[e].title}</span></td></tr>`;t+="</tbody>",s.innerHTML+=t}}),e.send()})();const addUser=()=>{const e=document.forms.au,t=document.getElementById("fname"),a=document.getElementById("lname"),s=document.getElementById("email"),r=document.getElementById("title"),n=document.getElementById("userList"),l=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,o=l.test(s.value),i=document.createElement("p"),m=document.createTextNode("required"),d=document.createTextNode("please enter a valid email address");if(i.classList.add("error"),i.appendChild(m),""!==a.value&&""!==t.value&&""!==s.value&&!0===o){let l=n.insertRow(0),o=l.insertCell(0),i=l.insertCell(1),m=l.insertCell(2);return o.innerHTML='<td><input type="checkbox"/></td>',i.innerHTML='<span data-last-name="'+a.value+'"  class="last-name"></span>'+a.value+', <span data-first-name="'+t.value+'" class="first-name">'+t.value+'</span><small><span data-email="'+s.value+'" class="email">'+s.value+"</span></small>",m.innerHTML='<span data-title="'+r.value+'" class="title"></span>'+r.value+"</span>",e.reset(),l}if(""===t.value){if(t.classList.contains("has-error"))return null;t.classList.add("has-error"),t.after(i.cloneNode(!0))}if(""===a.value){if(a.classList.contains("has-error"))return null;a.classList.add("has-error"),a.after(i.cloneNode(!0))}if(""===s.value||!1===o){if(s.classList.contains("has-error"))return null;s.classList.add("has-error"),""===s.value?s.after(i.cloneNode(!0)):!1===o&&(i.replaceChild(d,m),s.after(i.cloneNode(!0)))}if(""===r.value){if(r.classList.contains("has-error"))return null;r.classList.add("has-error"),r.after(i.cloneNode(!0))}t.onkeyup=(()=>{t.classList.contains("has-error")&&""!==t.value&&(t.classList.remove("has-error"),t.nextSibling.remove())}),a.onkeyup=(()=>{a.classList.contains("has-error")&&""!==a.value&&(a.classList.remove("has-error"),a.nextSibling.remove())}),s.onkeyup=(()=>{const e=l.test(s.value);!1===e&&s.nextSibling.replaceChild(d,s.nextSibling.childNodes[0]),s.classList.contains("has-error")&&""!==s.value&&!0===e&&(s.classList.remove("has-error"),s.nextSibling.remove())}),r.onkeyup=(()=>{r.classList.contains("has-error")&&""!==r.value&&(r.classList.remove("has-error"),r.nextSibling.remove())})},removeUser=()=>{const e=document.querySelectorAll("#userList input");for(let t=0;t<e.length;t++)"checkbox"===e[t].type&&!0===e[t].checked&&e[t].parentElement.parentElement.remove()},remBtn=document.getElementById("remBtn");remBtn.addEventListener("click",removeUser);const sortUser=()=>{const e=document.getElementById("userList"),t=document.getElementById("sort"),a=document.querySelectorAll("tr"),s=document.getElementsByClassName("last-name"),r=document.getElementsByClassName("first-name"),n=document.getElementsByClassName("email"),l=document.getElementsByClassName("title");extp=[];for(let e=0;e<a.length;e++)extp.push({first_name:r[e].dataset.firstName,last_name:s[e].dataset.lastName,email_address:n[e].dataset.email,title:l[e].dataset.title});let o=(e,t)=>`<td><input type="checkbox"/></td><td><span data-last-name="${e[t].last_name}" class="last-name">${e[t].last_name}</span>, \n            <span data-first-name="${e[t].first_name}" class="first-name">${e[t].first_name}</span>\n            <small><span data-email="${e[t].email_address}" class="email">${e[t].email_address}</span></small></td><td>\n            <span data-title="${e[t].title}" class="title">${e[t].title}</span></td></tr>`;if("fname"===t.value){const t=(e,t)=>e.first_name.toLowerCase()<t.first_name.toLowerCase()?-1:e.first_name.toLowerCase()>t.first_name.toLowerCase()?1:0,a=extp.sort(t),s=()=>{let e="<tr>";for(let t=0;t<a.length;t++)e+=o(a,t);return e};return e.innerHTML=s()}if("fnamed"===t.value){const t=(e,t)=>e.first_name.toLowerCase()<t.first_name.toLowerCase()?1:e.first_name.toLowerCase()>t.first_name.toLowerCase()?-1:0,a=extp.sort(t),s=()=>{let e="<tr>";for(let t=0;t<a.length;t++)e+=o(a,t);return e};return e.innerHTML=s()}if("lname"===t.value){const t=(e,t)=>e.last_name.toLowerCase()<t.last_name.toLowerCase()?-1:e.last_name.toLowerCase()>t.last_name.toLowerCase()?1:0,a=extp.sort(t),s=()=>{let e="<tr>";for(let t=0;t<a.length;t++)e+=o(a,t);return e};return e.innerHTML=s()}if("lnamed"===t.value){const t=(e,t)=>e.last_name.toLowerCase()<t.last_name.toLowerCase()?1:e.last_name.toLowerCase()>t.last_name.toLowerCase()?-1:0,a=extp.sort(t),s=()=>{let e="<tr>";for(let t=0;t<a.length;t++)e+=o(a,t);return e};return e.innerHTML=s()}if("email"===t.value){const t=(e,t)=>e.email_address.toLowerCase()<t.email_address.toLowerCase()?-1:e.email_address.toLowerCase()>t.email_address.toLowerCase()?1:0,a=extp.sort(t),s=()=>{let e="<tr>";for(let t=0;t<a.length;t++)e+=o(a,t);return e};return e.innerHTML=s()}if("emaild"===t.value){const t=(e,t)=>e.email_address.toLowerCase()<t.email_address.toLowerCase()?1:e.email_address.toLowerCase()>t.email_address.toLowerCase()?-1:0,a=extp.sort(t),s=()=>{let e="<tr>";for(let t=0;t<a.length;t++)e+=o(a,t);return e};return e.innerHTML=s()}if("title"===t.value){const t=(e,t)=>e.title.toLowerCase()<t.title.toLowerCase()?-1:e.title.toLowerCase()>t.title.toLowerCase()?1:0,a=extp.sort(t),s=()=>{let e="<tr>";for(let t=0;t<a.length;t++)e+=o(a,t);return e};return e.innerHTML=s()}if("titled"===t.value){const t=(e,t)=>e.title.toLowerCase()<t.title.toLowerCase()?1:e.title.toLowerCase()>t.title.toLowerCase()?-1:0,a=extp.sort(t),s=()=>{let e="<tr>";for(let t=0;t<a.length;t++)e+=o(a,t);return e};return e.innerHTML=s()}},sortSel=document.getElementById("sort");sortSel.addEventListener("change",sortUser);